# Unified configuration for both Cloud SQL and GKE drift analysis
# This single config file supports both resource types

projects:
  - my-production-project
  - my-staging-project
  - my-qa-project

# Cloud SQL baselines
sql_baselines:
  # Application databases
  - name: "application"
    filter_labels:
      database-role: "application"
    config:
      database_version: POSTGRES_15
      tier: db-custom-4-16384
      disk_size_gb: 100
      disk_type: PD_SSD
      disk_autoresize: true
      
      required_databases:
        - app_db
        - app_db_replica
        - postgres
      
      database_flags:
        cloudsql.iam_authentication: "on"
        log_connections: "on"
        max_connections: "200"
        
      settings:
        availability_type: REGIONAL
        backup_enabled: true
        backup_retention_days: 7
        point_in_time_recovery: true
        transaction_log_retention_days: 7
        
        ip_configuration:
          ipv4_enabled: false
          require_ssl: true
          authorized_networks:
            - "10.0.0.0/24"     # Corporate VPN
            - "192.168.1.0/24"  # Office network

  # Microservices databases
  - name: "microservices"
    filter_labels:
      database-role: "microservices"
    config:
      database_version: POSTGRES_15
      disk_type: PD_SSD
      
      required_databases:
        - service_a
        - service_b
        - postgres
      
      database_flags:
        cloudsql.enable_pg_cron: "on"
        cloudsql.iam_authentication: "on"
        
      settings:
        backup_enabled: true
        backup_retention_days: 7
        point_in_time_recovery: true

# GKE baselines
gke_baselines:
  # Production GKE clusters
  - name: "production"
    filter_labels:
      cluster-role: "production"
    cluster_config:
      master_version: "1.33"
      release_channel: REGULAR
      private_cluster: true
      workload_identity: true
      network_policy: true
      binary_authorization: true
      master_authorized_networks:
        - "10.0.0.0/24"     # Corporate VPN
        - "192.168.1.0/24"  # Office network
    nodepool_config:
      machine_type: n2-standard-4
      disk_size_gb: 100
      disk_type: pd-ssd
      image_type: COS_CONTAINERD
      auto_upgrade: true
      auto_repair: true

  # Development GKE clusters
  - name: "development"
    filter_labels:
      cluster-role: "development"
    cluster_config:
      master_version: "1.33"
      release_channel: RAPID
      private_cluster: true
      workload_identity: true
    nodepool_config:
      machine_type: n2-standard-2
      disk_size_gb: 50
      disk_type: pd-standard
      image_type: COS_CONTAINERD
      auto_upgrade: true
      auto_repair: true
